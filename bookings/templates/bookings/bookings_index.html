{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Your Bookings</h2>

    {% if bookings %}
        <ul class="list-group">
        {% for booking in bookings %}
            <li class="list-group-item mb-3">

                <strong>{{ booking.car.name }}</strong><br>
                {{ booking.start_date }} – {{ booking.end_date }} <br>
                <strong>₹{{ booking.total_price }}</strong>

                <div class="mt-2">
                    {% if not booking.is_cancelled %}
                        {% if booking.can_cancel %}
                            <form method="post" action="{% url 'bookings:cancel_booking' booking.id %}">
                                {% csrf_token %}
                                <button class="btn btn-danger btn-sm">
                                    Cancel Booking
                                </button>
                            </form>
                        {% else %}
                            <button class="btn btn-secondary btn-sm" disabled>
                                Cannot Cancel (24h Passed)
                            </button>
                        {% endif %}
                    {% else %}
                        <span class="badge bg-danger">Cancelled</span>
                    {% endif %}
                </div>

            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No bookings yet.</p>
    {% endif %}
</div>
{% endblock %}
